@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@using Umbraco.Cms.Core.Models

@{
    Layout = "masterTemplate.cshtml";
}

@{

    int pageSize = 3;
    int page = 1;

    if (!int.TryParse(Context.Request.Query["page"], out page))
    {
        page = 1;
    }

    var selection = Umbraco.Content(Guid.Parse("6225fd59-0f21-401f-9f0a-a2a6901bee8e"))
        .ChildrenOfType("article")
        .Where(x => x.IsVisible())
        .OrderBy(x => x.CreateDate);
    int totalNodes = selection.Count();
    int totalPages = (int)Math.Ceiling((double)totalNodes / pageSize);

    if (page < 1) page = 1;
    else if (page > totalPages) page = totalPages;

    var paginatedItems = selection.Skip((page - 1) * pageSize).Take(pageSize);
    int itemCount = selection.Count();
}


<main>

    <!-- page titler area start -->
    <section class="page-title-area section-spacing-top adjust-header-space">
        <div class="container">
            <div class="page-title-wrappper mb-60">
                <div class="breadcrumb-menu mb-20">
                    <nav aria-label="Breadcrumbs" class="breadcrumb-trail breadcrumbs">
                        <ul class="trail-items">
                            <li class="trail-item trail-begin"><span>Axil News</span></li>
                        </ul>
                    </nav>
                </div>
                <h2 class="page-title mb-35 animation__word_come_long">Blog Standard</h2>
            </div>
        </div>
    </section>
    <!-- page titler area end -->
    <!-- postbox area start -->
    <section class="postbox__area section-spacing-bottom">
        <div class="container">
            <div class="row gy-50">
                <div class="col-xxl-8 col-xl-7 col-lg-7">
                    <div class="postbox__wrapper">


                       

                            @foreach (var item in paginatedItems)
                            {
                                var BlogImage = item.Value<MediaWithCrops>("heroImage");
                                var blogDate = item.Value<DateTime>("date");
                                
                                
                                     <article class="postbox__item mb-60">
                                        <div class="postbox__thumb mb-30">
                                            <a href="@item.Url()">
                                                <img src="@BlogImage?.MediaUrl()" alt="@BlogImage?.Name">
                                            </a>
                                        </div>
                                        <div class="postbox__content">
                                            <div class="postbox__meta mb-20">
                                                <span>
                                                    <a href="blog.html">@item.Value("articleCategory")</a>
                                                </span>
                                                <span>
                                                    @blogDate.ToString("dd-MMM-yyyy")
                                                </span>
                                            </div>
                                            <h3 class="postbox__title">
                                                <a href="@item.Url()">
                                                    @item.Value("title")
                                                </a>
                                            </h3>
                                            <div class="postbox__text">
                                                <p>
                                                     @item.Value("summary")
                                                </p>
                                            </div>
                                            <div class="postbox__read-more">
                                                <a class="border-btn" href="@item.Url()">
                                                    <span class="btn-text">Read Blog post</span><span class="btn-icon">
                                                        <i class="flaticon-next"></i>
                                                    </span>
                                                </a>
                                            </div>
                                        </div>
                                    </article>


                            }


                       




                       
                      


                        <div class="bd-basic__pagination d-flex align-items-center">
                            <nav>
                                <ul>



                                  <!-- Previous -->
                                <li class="page-item @(page <= 1 ? "disabled" : "")">
                                        <a href="@(page > 1 ? (page - 1 == 1 ? "/blog" : $"/blog?page={page - 1}") : "javascript:void(0);")">
                                            <i class="fa-light fa-arrow-left-long"></i>

                                    </a>
                                </li>

                                <!-- Pages -->
                                @for (int i = 1; i <= totalPages; i++)
                                {
                                        <li class="page-item @(i == page ? "" : "current")">
                                            <a class="btn-arrow @(i == page ? "current" : "")"
                                           href="@(i == 1 ? "/blog" : $"/blog?page={i}")">
                                            @i.ToString("D2")
                                        </a>
                                    </li>
                                }

                                <!-- Next -->
                                <li class="page-item @(page >= totalPages ? "disabled" : "")">
                                        <a href="@(page < totalPages ? $"/blog?page={page + 1}" : "javascript:void(0);")">
                                            <i class="fa-light fa-arrow-right-long"></i>
                                        </a>
                                </li>

                                </ul>
                            </nav>
                        </div>



                    </div>
                </div>
                <div class="col-xxl-4 col-xl-5 col-lg-5">
                    <div class="sidebar__wrapper">
                        @*<div class="sidebar__widget mb-50">
                            <div class="sidebar__widget-content">
                                <div class="sidebar__search">
                                    <form action="#">
                                        <div class="sidebar__search-input">
                                            <input type="text" placeholder="Enter your keywords...">
                                            <button type="submit">
                                                <i class="flaticon-search"></i>
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>*@
                        <div class="sidebar__widget mb-50">
                            <h3 class="sidebar__widget-title mb-30">Top Stories</h3>
                            <div class="sidebar__widget-content">
                                <div class="sidebar__post">

                                @{
                                    var selectionRecent = Umbraco.Content(Guid.Parse("6225fd59-0f21-401f-9f0a-a2a6901bee8e"))
                                    .ChildrenOfType("article")
                                    .Where(x => x.IsVisible())
                                    .OrderBy(x => x.UpdateDate)
                                    .Take(4);
                                }
                                
                                    @foreach (var itemRecent in selectionRecent)
                                    {
                                       

                                        var BlogImageRecent = itemRecent.Value<MediaWithCrops>("heroImage");
                                        var blogDateRecent = itemRecent.Value<DateTime>("date");
                                        
                                

                                         <div class="rc__post">
                                        <div class="rc__post-thumb">
                                            <a href="@itemRecent.Url()">
                                                <img src="@BlogImageRecent?.MediaUrl()"
                                                     alt="@BlogImageRecent?.Name">
                                            </a>
                                        </div>
                                        <div class="rc__post-content">
                                            <h5 class="rc__post-title">
                                                <a href="@itemRecent.Url()">
                                                    @itemRecent.Value("title")
                                                </a>
                                            </h5>
                                            <div class="postbox__meta">
                                                <span>
                                                    <a href="@itemRecent.Url()">@itemRecent.Value("articleCategory")</a>
                                                </span>
                                                <span>
                                                    @blogDateRecent.ToString("dd-MMM-yyyy")
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    }
                                

                                </div>
                            </div>
                        </div>
@*
                        <div class="sidebar__widget mb-45">
                            <h3 class="sidebar__widget-title mb-30">Post Category</h3>
                            <div class="sidebar__widget-content">
                                <ul>
                                    <li>
                                        <a href="blog.html">
                                            <span>Digital Marketing</span>
                                            <span>10</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="blog.html"><span>Creative Agency</span> <span>10</span></a>
                                    </li>
                                    <li>
                                        <a href="blog.html">
                                            <span>Personal Portfolio</span>
                                            <span>10</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="blog.html"><span>IT Solutions</span> <span>10</span></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="sidebar__widget mb-40">
                            <h3 class="sidebar__widget-title mb-30">Popular Tags</h3>
                            <div class="sidebar__widget-content">
                                <div class="sidebar__tag">
                                    <a href="blog.html">Agency</a>
                                    <a href="blog.html">Marketing</a>
                                    <a href="blog.html">IT Solutions</a>
                                    <a href="blog.html">Portfolio</a>
                                    <a href="blog.html">Art Design</a>
                                    <a href="blog.html">Education</a>
                                    <a href="blog.html">Data Science</a>
                                    <a href="blog.html">Machine Learning</a>
                                    <a href="blog.html">App</a>
                                    <a href="blog.html">Tips</a>
                                </div>
                            </div>
                        </div>
                        <div class="sidebar__widget">
                            <div class="sidber__adv-thumb">
                                <img src="~/assets/img/gallery/gallery-23.html" alt="image not found">
                            </div>
                        </div>
*@

                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- postbox area end -->

</main>